---
  - name: build IOS XE inventory
    hosts: cisco
#    connection: network_cli
#    remote_user: david
#    become: yes
#    become_method: enable


    vars:
       desired_ios_version: "16.06.01"

    tasks:

      - name: gathering IOS XE facts
        ios_facts:
        register: all_facts
        connection: network_cli
        become: yes
        become_method: enable
        remote_user: david

      - name: create HTML report
        template:
          src: report-ios.j2
          dest: "{{ destination_dir }}"
        delegate_to: 192.168.122.200
        connection: ssh
        become: yes
        become_user: root
        become_method: su
        run_once: true
#          provider: "{{login_info}}"
